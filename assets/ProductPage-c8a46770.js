import{u,r as x,a as f,j as t,b as v,c as p,t as y,L as _,M as m,d as C,l as N,N as b,e as L}from"./index-1a97b4eb.js";const P="_productList_uzr53_3",w={productList:P},S="_formContainer_16kop_1",k="_form_16kop_1",l={formContainer:S,form:k},E=()=>{const i=u(),[a,s]=x.useState(""),[e,n]=f("product",{title:"",description:"",category:"",price:"",image:""}),o=c=>{const{name:h,value:j}=c.target;n({...e,[h]:j})};function r(){const c=/^(https?:\/\/)?([\w.-]+\.\w{2,})(\/\S*)?$/;return e.title.trim()===""?(s("title is not valid"),!1):e.description.trim()===""?(s("description is not valid"),!1):e.category.trim()===""?(s("category is not valid"),!1):e.price.trim()===""||Number.isNaN(Number(e.price))?(s("price is not valid"),!1):c.test(e.image)?!0:(s("url is not valid"),!1)}const g=c=>{c.preventDefault(),s(""),sessionStorage.setItem("price",e.price),r()&&i(v(e))};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:l.formContainer,children:t.jsxs("form",{className:l.form,onSubmit:g,action:"",children:[t.jsx("label",{children:"Добавить новый продукт:"}),t.jsx("input",{name:"title",onChange:o,placeholder:"title",type:"text",value:e.title}),t.jsx("input",{name:"description",onChange:o,placeholder:"description",type:"text",value:e.description}),t.jsx("input",{name:"category",onChange:o,placeholder:"category",type:"text",value:e.category}),t.jsx("input",{name:"price",onChange:o,placeholder:"price",type:"text",value:e.price}),t.jsx("input",{name:"image",onChange:o,placeholder:"image",type:"text",value:e.image}),t.jsx("button",{className:l.button,type:"submit",children:"Добавить файл"})]})}),t.jsx("div",{style:{textAlign:"center"},children:a&&t.jsx("span",{style:{color:"red"},children:a})})]})},W="_productCard_1231s_1",A="_title_1231s_11",D="_imgWrapper_1231s_21",d={productCard:W,title:A,imgWrapper:D},F=({id:i,title:a,image:s,price:e})=>{const n=u(),{favorites:o}=p(r=>r.products);return t.jsx("div",{children:t.jsxs("li",{className:d.productCard,children:[t.jsx("span",{className:d.title,children:a}),t.jsx("div",{className:d.imgWrapper,children:t.jsx("img",{src:s,alt:""})}),t.jsxs("span",{children:["Цена: ",e]}),t.jsx("svg",{style:{cursor:"pointer"},onClick:()=>n(y(i)),width:"30px",height:"30px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:t.jsx("g",{transform:"translate(0 -1028.4)",children:t.jsx("path",{d:"m7 1031.4c-1.5355 0-3.0784 0.5-4.25 1.7-2.3431 2.4-2.2788 6.1 0 8.5l9.25 9.8 9.25-9.8c2.279-2.4 2.343-6.1 0-8.5-2.343-2.3-6.157-2.3-8.5 0l-0.75 0.8-0.75-0.8c-1.172-1.2-2.7145-1.7-4.25-1.7z",fill:o.includes(i)?"#e74c3c":"grey"})})}),t.jsx(_,{to:String(i),children:t.jsx(m,{text:"To product"})}),t.jsx(m,{text:"Delete",onClick:()=>n(C(i))})]},i)})},z=()=>{const i=u(),{products:a,error:s,isLoading:e,favorites:n}=p(r=>r.products),{user:o}=p(r=>r.user);return x.useEffect(()=>{i(N())},[]),o?t.jsxs("div",{children:[t.jsx(E,{}),e&&t.jsx(L,{}),s&&t.jsxs("h4",{style:{color:"red"},children:["Error ",s]}),!e&&t.jsx("ul",{className:w.productList,children:a.map(r=>t.jsx(F,{id:r.id,title:r.title,image:r.image,price:r.price},r.id))})]}):t.jsx(b,{to:"../login"})};export{z as default};
//# sourceMappingURL=ProductPage-c8a46770.js.map
