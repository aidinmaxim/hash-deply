{"version":3,"file":"ProductPage-c8a46770.js","sources":["../../src/features/products/productForm/ProductForm.tsx","../../src/features/products/productCard/ProductCard.tsx","../../src/features/products/productPage/ProductPage.tsx"],"sourcesContent":["import { ChangeEvent, FC, FormEvent, useState } from 'react'\n// import cn from 'classnames'\nimport styles from './ProductForm.module.css'\nimport { useAppDispatch } from '../../../app/hooks';\nimport { addProduct } from '../productAction';\nimport IProduct from '../types/Product';\nimport useLocalStorage from '../../../hooks/useLS';\n\nconst ProductForm: FC = () => {\n\n  const dispatch = useAppDispatch()\n\n  //прописываем стейт на каждый input\n  // const [title, setTitle] = useState('');\n  // const [description, setDescription] = useState('');\n  // const [category, setCategory] = useState('');\n  // const [price, setPrice] = useState('');\n  // const [image, setImage] = useState('');\n\n  const [error, setError] = useState('');\n\n  const [product, setProduct] = useLocalStorage<IProduct>('product',{\n    title: '',\n    description: '',\n    category: '',\n    price: '',\n    image: ''\n  })\n\n  // делаем функцию обработчик, в которой обращаемся к параметру event (или 'e')\n  // и предотвращаем перезагрузку по умолчанию по нажатию (как в обычном js)\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = event.target\n    setProduct({\n      ...product,\n      [name]: value\n    })\n  }\n\n\n  function valideateInputs(): boolean {\n    const linkPattern = /^(https?:\\/\\/)?([\\w.-]+\\.\\w{2,})(\\/\\S*)?$/;\n    if (product.title.trim() === '') {\n      setError('title is not valid')\n      return false\n    }\n    if (product.description.trim() === '') {\n      setError('description is not valid')\n      return false\n    }\n    if (product.category.trim() === '') {\n      setError('category is not valid')\n      return false\n    }\n    if (product.price.trim() === '' || (Number.isNaN(Number(product.price)))) {\n\n      setError('price is not valid')\n      return false\n    }\n    if (!linkPattern.test(product.image)) {\n      setError('url is not valid')\n      return false\n    }\n    return true\n  }\n\n\n  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setError('')\n\n     sessionStorage.setItem('price', product.price)\n\n    if (valideateInputs()) {\n      dispatch(addProduct(product))\n    }\n  }\n\n\n  return (\n    <>\n      <div className={styles.formContainer}>\n        <form className={styles.form} onSubmit={handleSubmit} action=\"\">\n          <label>Добавить новый продукт:</label>\n          <input name='title' onChange={handleChange} placeholder='title' type=\"text\" value={product.title} />\n          <input name='description' onChange={handleChange} placeholder='description' type=\"text\" value={product.description} />\n          <input name='category' onChange={handleChange} placeholder='category' type=\"text\" value={product.category} />\n          <input name='price' onChange={handleChange} placeholder='price' type=\"text\" value={product.price} />\n          <input name='image' onChange={handleChange} placeholder='image' type=\"text\" value={product.image} />\n          <button className={styles.button} type='submit'>Добавить файл</button>\n        </form>\n      </div>\n      <div style={{ textAlign: 'center' }}>\n        {error && <span style={{ color: 'red' }}>{error}</span>}\n      </div>\n    </>\n  )\n}\n\nexport default ProductForm\n","import React, {FC} from 'react';\nimport styles from './ProductCard.module.css'\nimport {toggleFavorites} from \"../productSlice\";\nimport {Link} from \"react-router-dom\";\nimport MyButton from \"../../../components/myButton/MyButton\";\nimport {deleteProduct} from \"../productAction\";\nimport {useAppDispatch, useAppSelector} from \"../../../app/hooks\";\n\ninterface IProductCardProps {\n    id?: number\n    title?: string\n    price?: string\n    category?: string\n    description?: string\n    image?: string\n    rating?: {\n        rate: number\n        count: number\n    }\n}\n\nconst ProductCard: FC<IProductCardProps> = ({id, title, image, price}) => {\n    const dispatch = useAppDispatch()\nconst {favorites} = useAppSelector(state => state.products)\n\n    return (\n        <div>\n            <li key={id} className={styles.productCard}>\n                <span className={styles.title}>{title}</span>\n                <div className={styles.imgWrapper}>\n                    <img src={image} alt=\"\"/>\n                </div>\n                <span>Цена: {price}</span>\n                <svg style={{cursor: 'pointer'}}\n                    onClick={() => dispatch(toggleFavorites(id))} width=\"30px\"\n                    height=\"30px\"\n                    viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"\n                >\n                    <g transform=\"translate(0 -1028.4)\">\n                        <path\n                            d=\"m7 1031.4c-1.5355 0-3.0784 0.5-4.25 1.7-2.3431 2.4-2.2788 6.1 0 8.5l9.25 9.8 9.25-9.8c2.279-2.4 2.343-6.1 0-8.5-2.343-2.3-6.157-2.3-8.5 0l-0.75 0.8-0.75-0.8c-1.172-1.2-2.7145-1.7-4.25-1.7z\"\n                            fill={favorites.includes(id as number) ? \"#e74c3c\" : 'grey'}/>\n                    </g>\n                </svg>\n                <Link to={String(id)}><MyButton text='To product'/></Link>\n                <MyButton text='Delete' onClick={() => dispatch(deleteProduct(id))}/>\n            </li>\n        </div>\n    );\n};\n\nexport default ProductCard;","import {FC, useEffect, useState} from 'react'\n// import cn from 'classnames'\nimport styles from './ProductPage.module.css'\nimport {useAppDispatch, useAppSelector} from '../../../app/hooks'\nimport {deleteProduct, loadProducts} from '../productAction'\nimport ProductForm from '../productForm/ProductForm'\nimport Loader from '../../../components/loader/Loader'\nimport ProductCard from '../productCard/ProductCard'\nimport {Navigate} from \"react-router-dom\";\n\n\nconst ProductPage: FC = () => {\n    const dispatch = useAppDispatch()\n\n    const {products, error, isLoading, favorites} = useAppSelector(state => state.products)\n    const {user} = useAppSelector(state => state.user)\n\n    useEffect(() => {\n        dispatch(loadProducts())\n    }, [])\n\n    const initialVariant = {\n        hidden: {opacity: 0, scale: 0.8},\n        visible: {opacity: 1, scale: 1, transition: {duration: 0.8}}\n    }\n\n    if (!user) {\n        return <Navigate to='../login'/>\n    }\n\n    return (\n        <div>\n            <ProductForm/>\n            {isLoading && <Loader/>}\n            {error && <h4 style={{color: 'red'}}>Error {error}</h4>}\n            {!isLoading && (\n                <ul className={styles.productList}>\n                    {products.map(el => (\n                        <ProductCard key={el.id} id={el.id} title={el.title} image={el.image} price={el.price}/>\n                    ))}\n                </ul>\n            )}\n\n        </div>\n    )\n}\n\nexport default ProductPage\n"],"names":["ProductForm","dispatch","useAppDispatch","error","setError","useState","product","setProduct","useLocalStorage","handleChange","event","name","value","valideateInputs","linkPattern","handleSubmit","e","addProduct","jsxs","Fragment","jsx","styles","ProductCard","id","title","image","price","favorites","useAppSelector","state","toggleFavorites","Link","MyButton","deleteProduct","ProductPage","products","isLoading","user","useEffect","loadProducts","Loader","el","Navigate"],"mappings":"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"}